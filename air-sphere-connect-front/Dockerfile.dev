# Dockerfile pour le développement avec hot-reload
FROM node:20-alpine

WORKDIR /app

# Copier package.json et package-lock.json
COPY package*.json ./

# Installer les dépendances avec legacy-peer-deps pour Unovis
RUN npm ci --legacy-peer-deps

# Copier le reste du code source
COPY . .

# Exposer le port 4200 pour Angular
EXPOSE 4200

# Lancer le serveur de développement Angular avec hot-reload
# --host 0.0.0.0 permet l'accès depuis l'extérieur du conteneur
# --poll active la détection de changements par polling (nécessaire pour Docker)
CMD ["npm", "start", "--", "--host", "0.0.0.0", "--poll", "2000"]
