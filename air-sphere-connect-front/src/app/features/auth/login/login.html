<div class="flex justify-center min-h-screen p-4 bg-base-200">
  <div class="w-full max-w-md">
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body">
        <h2 class="card-title text-primary/90 text-2xl font-bold mb-16">Connexion</h2>

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-8">

          <app-input
            label="Nom d'utilisateur"
            type="text"
            [control]="usernameControl"
            [required]="true"
            iconLeft="user"
            placeholder="Entrez votre nom d'utilisateur"
            autocomplete="username"
            fieldName="username"
          ></app-input>

          <app-input
            label="Mot de passe"
            [type]="passwordType()"
            [control]="passwordControl"
            [required]="true"
            iconLeft="lockClosed"
            [iconRight]="passwordIcon()"
            (iconRightClick)="togglePasswordVisibility()"
            placeholder="••••••••"
            autocomplete="current-password"
            fieldName="password"
          ></app-input>

          @if (errorMessage()) {
            <div class="alert alert-error flex items-center gap-2">
              <app-icon name="exclamationTriangle" size="md" color="current" />
              <span>{{ errorMessage() }}</span>
              <app-button type="button" size="sm" shape="circle" color="error" variant="ghost" (click)="clearError()" heroIcon="xMark"></app-button>
            </div>
          }


          <app-button
            type="submit"
            [fullWidth]="true"
            [disabled]="loginForm.invalid"
            [loading]="isLoading()"
          >
            {{ isLoading() ? 'Connexion...' : 'Connexion' }}
          </app-button>
        </form>

        <div class="divider">OU</div>
        <a routerLink="/auth/register" class="btn btn-outline btn-info btn-block">
          Créer un compte
        </a>

      </div>
    </div>
  </div>
</div>
