<fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-xs border p-4" style="width: 100%;">
  @if (user && user.favorites && user.favorites.length > 0) {
    <table class="w-full border border-gray-200 rounded-lg shadow-sm">
      <thead>
      <tr>
        <th class="p-2">Export M√©t√©o</th>
        <th class="p-2">Export Qualit√© de l'air</th>
        <th class="p-2">Export Population</th>
        <th class="p-2">Ville</th>
        <th class="p-2">Cr√©√© le</th>
        <th class="p-2">Modifi√© le</th>
        <th class="p-2 w-0">Actions</th>
      </tr>
      </thead>
      <tbody>
        @for (favorite of user.favorites; track favorite.id) {
          <tr class="border-t">
            @if (favorite?.weather) {
              <td class="p-2 text-center">
                <app-button
                  class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                  color="primary"
                  variant="solid"
                >
                  PDF
                </app-button>
                <div class="divider divider-horizontal">
                  <app-button
                    class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                    color="primary"
                    variant="solid"
                  >
                    CSV
                  </app-button>
                </div>
              </td>
            } @else {
              <td class="p-2 text-center">Non s√©lectionner</td>
            }
            @if (favorite?.airQuality) {
              <td class="p-2 text-center">
                <app-button
                  class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                  color="primary"
                  variant="solid"
                >
                  PDF
                </app-button>
                <div class="divider divider-horizontal">
                  <app-button
                    class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                    color="primary"
                    variant="solid"
                  >
                    CSV
                  </app-button>
                </div>
              </td>
            } @else {
              <td class="p-2 text-center">Non s√©lectionner</td>
            }
            @if (favorite?.population) {
              <td class="p-2 text-center">
                <app-button
                  class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                  color="primary"
                  variant="solid"
                >
                  PDF
                </app-button>
                <div class="divider divider-horizontal">
                  <app-button
                    class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                    color="primary"
                    variant="solid"
                  >
                    CSV
                  </app-button>
                </div>
              </td>
            } @else {
              <td class="p-2 text-center">Non s√©lectionner</td>
            }
            <td class="p-2 text-center">{{ favorite.cityName }}</td>
            <td class="p-2 text-center">{{ favorite.createdAt }}</td>
            <td class="p-2 text-center">{{ favorite.updatedAt }}</td>
            <td class="p-2 flex justify-center">
              <app-button
                class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                color="primary"
                variant="solid"
                (click)="editFavorites(favorite.id)"
              >
                Modifier
              </app-button>
              <div class="divider divider-horizontal"></div>
              <app-button
                class="w-20 h-7 divider-horizontal divider-start btn-outline btn-primary"
                color="warning"
                variant="solid"
                (click)="deleteFavorites(favorite.id)"
              >
                Supprimer
              </app-button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <p>Aucun favori trouv√©.</p>
  }
</fieldset>
<br>
<app-button color="primary" size="md" variant="solid" (click)="addFavorites()" class="btn-outline btn-primary">
  Ajouter
</app-button>

<!-- üü£ Modal -->
<app-favorites-form
  [isOpen]="isModalOpen"
  [editingFavoriteId]="editingFavoriteId"
  [initialFavoriteData]="initialFavoriteData"
  (close)="onModalClose()"
></app-favorites-form>
